!function(a){"use strict";function b(a,b){if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b-a),c.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(a,b))}function c(a){var b=this.value.length;if(a="start"==a.toLowerCase()?"Start":"End",document.selection){var d,e,f,c=document.selection.createRange();return d=c.duplicate(),d.expand("textedit"),d.setEndPoint("EndToEnd",c),e=d.text.length-c.text.length,f=e+c.text.length,"Start"==a?e:f}return"undefined"!=typeof this["selection"+a]&&(b=this["selection"+a]),b}var d={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};a.fn.number=function(e,f,g,h){h="undefined"==typeof h?",":h,g="undefined"==typeof g?".":g,f="undefined"==typeof f?0:f;var i="\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4),j=new RegExp("[^"+i+"0-9]","g"),k=new RegExp(i,"g");return e===!0?this.is("input:text")?this.on({"keydown.format":function(e){var i=a(this),j=i.data("numFormat"),k=e.keyCode?e.keyCode:e.which,l="",m=c.apply(this,["start"]),n=c.apply(this,["end"]),o="",p=!1;if(d.codes.hasOwnProperty(k)&&(k=d.codes[k]),!e.shiftKey&&k>=65&&k<=90?k+=32:!e.shiftKey&&k>=69&&k<=105?k-=48:e.shiftKey&&d.shifts.hasOwnProperty(k)&&(l=d.shifts[k]),""==l&&(l=String.fromCharCode(k)),8!=k&&45!=k&&127!=k&&l!=g&&!l.match(/[0-9]/)){var q=e.keyCode?e.keyCode:e.which;if(46==q||8==q||127==q||9==q||27==q||13==q||(65==q||82==q||80==q||83==q||70==q||72==q||66==q||74==q||84==q||90==q||61==q||173==q||48==q)&&(e.ctrlKey||e.metaKey)===!0||(86==q||67==q||88==q)&&(e.ctrlKey||e.metaKey)===!0||q>=35&&q<=39||q>=112&&q<=123)return;return e.preventDefault(),!1}if(0==m&&n==this.value.length?8==k?(m=n=1,this.value="",j.init=f>0?-1:0,j.c=f>0?-(f+1):0,b.apply(this,[0,0])):l==g?(m=n=1,this.value="0"+g+new Array(f+1).join("0"),j.init=f>0?1:0,j.c=f>0?-(f+1):0):45==k?(m=n=2,this.value="-0"+g+new Array(f+1).join("0"),j.init=f>0?1:0,j.c=f>0?-(f+1):0,b.apply(this,[2,2])):(j.init=f>0?-1:0,j.c=f>0?-f:0):j.c=n-this.value.length,j.isPartialSelection=m!=n,f>0&&l==g&&m==this.value.length-f-1)j.c++,j.init=Math.max(0,j.init),e.preventDefault(),p=this.value.length+j.c;else if(45!=k||0==m&&0!=this.value.indexOf("-"))if(l==g)j.init=Math.max(0,j.init),e.preventDefault();else if(f>0&&127==k&&m==this.value.length-f-1)e.preventDefault();else if(f>0&&8==k&&m==this.value.length-f)e.preventDefault(),j.c--,p=this.value.length+j.c;else if(f>0&&127==k&&m>this.value.length-f-1){if(""===this.value)return;"0"!=this.value.slice(m,m+1)&&(o=this.value.slice(0,m)+"0"+this.value.slice(m+1),i.val(o)),e.preventDefault(),p=this.value.length+j.c}else if(f>0&&8==k&&m>this.value.length-f){if(""===this.value)return;"0"!=this.value.slice(m-1,m)&&(o=this.value.slice(0,m-1)+"0"+this.value.slice(m),i.val(o)),e.preventDefault(),j.c--,p=this.value.length+j.c}else 127==k&&this.value.slice(m,m+1)==h?e.preventDefault():8==k&&this.value.slice(m-1,m)==h?(e.preventDefault(),j.c--,p=this.value.length+j.c):f>0&&m==n&&this.value.length>f+1&&m>this.value.length-f-1&&isFinite(+l)&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&1===l.length&&(o=n===this.value.length?this.value.slice(0,m-1):this.value.slice(0,m)+this.value.slice(m+1),this.value=o,p=m);else e.preventDefault();p!==!1&&b.apply(this,[p,p]),i.data("numFormat",j)},"keyup.format":function(d){var k,e=a(this),g=e.data("numFormat"),h=d.keyCode?d.keyCode:d.which,i=c.apply(this,["start"]),j=c.apply(this,["end"]);0!==i||0!==j||189!==h&&109!==h||(e.val("-"+e.val()),i=1,g.c=1-this.value.length,g.init=1,e.data("numFormat",g),k=this.value.length+g.c,b.apply(this,[k,k])),""===this.value||(h<48||h>57)&&(h<96||h>105)&&8!==h&&46!==h&&110!==h||(e.val(e.val()),f>0&&(g.init<1?(i=this.value.length-f-(g.init<0?1:0),g.c=i-this.value.length,g.init=1,e.data("numFormat",g)):i>this.value.length-f&&8!=h&&(g.c++,e.data("numFormat",g))),46!=h||g.isPartialSelection||(g.c++,e.data("numFormat",g)),k=this.value.length+g.c,b.apply(this,[k,k]))},"paste.format":function(b){var c=a(this),d=b.originalEvent,e=null;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):d.clipboardData&&d.clipboardData.getData&&(e=d.clipboardData.getData("text/plain")),c.val(e),b.preventDefault(),!1}}).each(function(){var b=a(this).data("numFormat",{c:-(f+1),decimals:f,thousands_sep:h,dec_point:g,regex_dec_num:j,regex_dec:k,init:!!this.value.indexOf(".")});""!==this.value&&b.val(b.val())}):this.each(function(){var b=a(this),c=+b.text().replace(j,"").replace(k,".");b.number(isFinite(c)?+c:0,f,g,h)}):this.text(a.number.apply(window,arguments))};var e=null,f=null;a.isPlainObject(a.valHooks.text)?(a.isFunction(a.valHooks.text.get)&&(e=a.valHooks.text.get),a.isFunction(a.valHooks.text.set)&&(f=a.valHooks.text.set)):a.valHooks.text={},a.valHooks.text.get=function(b){var d,c=a(b),g=c.data("numFormat");return g?""==b.value?"":(d=+b.value.replace(g.regex_dec_num,"").replace(g.regex_dec,"."),(0===b.value.indexOf("-")?"-":"")+(isFinite(d)?d:0)):a.isFunction(e)?e(b):void 0},a.valHooks.text.set=function(b,c){var d=a(b),e=d.data("numFormat");if(e){var g=a.number(c,e.decimals,e.dec_point,e.thousands_sep);return a.isFunction(f)?f(b,g):b.value=g}return a.isFunction(f)?f(b,c):void 0},a.number=function(a,b,c,d){d="undefined"==typeof d?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":d,c="undefined"==typeof c?new Number(.1).toLocaleString().charAt(1):c,b=isFinite(+b)?Math.abs(b):0;var e="\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4),f="\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4);a=(a+"").replace(".",c).replace(new RegExp(f,"g"),"").replace(new RegExp(e,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var g=isFinite(+a)?+a:0,h="",i=function(a,b){return""+ +(Math.round((""+a).indexOf("e")>0?a:a+"e+"+b)+"e-"+b)};return h=(b?i(g,b):""+Math.round(g)).split("."),h[0].length>3&&(h[0]=h[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),(h[1]||"").length<b&&(h[1]=h[1]||"",h[1]+=new Array(b-h[1].length+1).join("0")),h.join(c)}}(jQuery);